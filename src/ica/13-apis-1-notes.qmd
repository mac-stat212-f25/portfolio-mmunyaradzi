---
title: "13 APIs P1"
---


- Read [A Non-Programmer's Introduction to JSON](https://blog.scottlowe.org/2013/11/08/a-non-programmers-introduction-to-json/) by Scott Lowe
- Read [Understanding URL](https://www.tutorialspoint.com/html/understanding_url_tutorial.htm) by Tutorials Point
- Read `urltools` package vignette [Elegant URL handling with urltools](https://cran.r-project.org/web/packages/urltools/vignettes/urltools.html)



Go to <https://www.nytimes.com/interactive/2024/09/18/business/economy/mortgages-car-loans-interest-rates.html> then answer the following questions:
 
>What is the data story?

-The central narrative is that 30‑year mortgage and auto loan rates, which spiked during the post‑pandemic tightening cycle, have started to edge down as the Fed cuts its policy rate, offering partial relief to borrowers but not a return to pre‑2020 cheap credit. The story likely contrasts current mortgage and car loan rates with recent peaks and with the low‑rate 2010s, emphasizing that borrowing is still expensive by historical standards and that many households remain locked into older loans or priced out of new debt.

>What is effective

-The focus on specific household products (mortgages, new and used car loans) makes abstract rate moves concrete for readers deciding whether to buy, refinance, or delay big purchases.

-Using recent averages (for example, mortgage rates in the 6–7 percent range and auto loans around 7–11 percent) situates the data in a clear, current context and reinforces the message that costs are easing but remain high.

>What could be improved

-The story could show distributional detail (by credit score, income, or loan term) so readers see how rate changes differ for prime versus subprime borrowers or for 36‑ versus 72‑month auto loans, rather than only overall averages.

-It could connect more explicitly to quantity outcomes—such as changes in mortgage originations, auto sales, and delinquencies—to show not just what rates are, but how households are actually responding to them


## JSON files

JSON (JavaScript Object Notation) is a lightweight, human-readable data-interchange format.

- It is easy for humans to read and write.
- It is easy for machines to parse and generate.
- It is commonly used for APIs (Application Program Interface) to share data.





JSON Syntax:

- Curly braces `{}` enclose an object, which is a collection of key-value pairs.
- Key-value pairs--each pair consists of a key (string) and a value (can be string, number, boolean, array, or another object).
- Colon `:` separates the key from the value.
- Comma `,` separates different key-value pairs within the object.
- Square brackets `[]` enclose an array, which is an ordered list of values.
- Double quotes used to surround the key and any string value


## Reading JSON Files

There are a few packages we could use to read JSON files into R.

We will start by using the `jsonlite` package today.

```{r echo=TRUE}
# install.packages('jsonlite')
library(jsonlite)

# R originally treats JSON as a string of characters
json <- '{"name": "John", "age": 30, "city": "New York", "hobbies": ["reading", "hiking", "coding"]}'
```



```{r echo=TRUE}
#fromJSON() converts JSON characters to R objects
data_in_r <- fromJSON(json)

data_in_r
```

What type of object is this?


A named list (but elements are not all of the same length).

```{r echo=TRUE}
data_in_r |> class()
```


If we have an array of objects, we can imagine each element of the array is one row of a dataset.

```{r echo=TRUE}
json <-
'[
  {"Name" : "Mario", "Age" : 32, "Occupation" : "Plumber"}, 
  {"Name" : "Peach", "Age" : 21, "Occupation" : "Princess"},
  {},
  {"Name" : "Bowser", "Occupation" : "Koopa"}
]'
```


```{r echo=TRUE}
# If we don't try to simplify, fromJSON() provides a list
fromJSON(json, simplifyVector = FALSE) 
```


```{r echo=TRUE}
# If it is an array that satisfies the constraints of a data frame, it may be able to simplify to data frame
fromJSON(json, simplifyVector = TRUE)
```

For more info about converting JSON data to R objects with jsonlite, see <https://cran.r-project.org/web/packages/jsonlite/vignettes/json-mapping.pdf>
